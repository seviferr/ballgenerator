!function(){function t(t,e,i,s,l,h,a,u,c){this.id=t||"ball"+o.length,this.width=e||Math.round(100*Math.random()+10),this.height=i||this.width,this.bgcolor=s||"#"+Math.floor(16777215*Math.random()).toString(16),this.posX=l||20,this.posY=h||20,this.speedX=a||Math.round(10*Math.random()),this.speedY=u||Math.round(10*Math.random())-5,this.movement="bounce",this.init=function(){var t=document.getElementById("ball-preview"),e=(document.forms.panel,document.createElement("div"));e.setAttribute("class","ball"),e.setAttribute("id",this.id),e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.backgroundColor=this.bgcolor,e.style.borderRadius="100%",e.style.left="50%",e.style.top="50%",e.style.marginTop="-"+this.height/2+"px",e.style.marginLeft="-"+this.width/2+"px",e.style.position="absolute",t.appendChild(e)},this.launch=function(){this.posX=0,this.posY=0,o.push(this)},this.move=function(){var t=document.getElementById(this.id).parentElement,e=t.offsetWidth,i=t.offsetHeight;switch(this.movement){case"dejavu":this.posX=(this.posX+this.speedX)%e,this.posY=(this.posY+this.speedY)%i;break;case"bounce":this.posX+=this.speedX,this.posY+=this.speedY,(this.posX+this.width>e||this.posX<0)&&(this.speedX*=-1),(this.posY+this.width>i||this.posY<0)&&(this.speedY*=-1);break;default:this.posX=(l+this.speedX)%e,this.posY=(h+this.speedY)%i}},this.updateId=function(t){this.id=t,console.log("newId : "+t)},this.updateWidth=function(t){this.width=t,document.getElementById(this.id).style.width=t,document.getElementById(this.id).style.marginLeft=t*-1/2,console.log(d),this.height=t,document.getElementById(this.id).style.height=t,document.getElementById(this.id).style.marginTop=t*-1/2,n()},this.updateHeight=function(t){this.height=t,document.getElementById(this.id).style.height=t*-1/2,document.getElementById(this.id).style.marginTop=-(t*-1)/2,console.log(t),this.width=t,document.getElementById(this.id).style.width=t,document.getElementById(this.id).style.marginLeft=t*-1/2,n()},this.updateSpeedX=function(t){this.speedX=t,console.log(t)},this.updateSpeedY=function(t){this.speedY=t,console.log(t)},this.updateBgColor=function(t){this.bgcolor=t,document.getElementById(this.id).style.backgroundColor=t,console.log("NewBgColor "+t)},this.updatePosX=function(t){this.posX=t,document.getElementById(this.id).style.left=t,console.log(t)},this.updatePosY=function(t){this.posY=t,document.getElementById(this.id).style.top=t,console.log(t)}}function e(){o.forEach(function(t,e){t.move(),document.getElementById(t.id).style.width=t.width,document.getElementById(t.id).style.height=t.height,document.getElementById(t.id).style.backgroundColor=t.bgcolor,document.getElementById(t.id).style.backgroundColor=t.bgcolor,document.getElementById(t.id).style.left=t.posX+"px",document.getElementById(t.id).style.top=t.posY+"px"})}function i(){void 0!==document.getElementById("test-ball")&&document.getElementById("test-ball").remove(),d=new t("test-ball"),d.init(),n()}function s(){var t=document.getElementById("pipe"),e=document.createElement("div");e.setAttribute("id","ball"+o.length),e.setAttribute("class","ball"),e.style.width=d.width,e.style.height=d.height,e.style.left=200,e.style.top=t.style.height-d.height/2,e.style.backgroundColor=d.bgcolor,e.style.borderRadius="100%",e.style.position="absolute",console.log(e.style.left),console.log(e.style.top),document.body.appendChild(e),d.updateId("ball"+o.length),d.updatePosX(200),d.updatePosY(window.innerHeight/2-d.height/2),o.push(d),console.log(o),i()}function n(){l.value=d.width,h.value=d.height,a.value=d.speedX,u.value=d.speedY,c.value=d.bgcolor}var o=(setInterval(e,20),[]),d=new t("test-ball");d.init();var l=document.getElementById("ball-width"),h=document.getElementById("ball-height"),a=document.getElementById("ball-speedx"),u=document.getElementById("ball-speedy"),c=document.getElementById("ball-color");n(),document.getElementById("randomize").addEventListener("click",i),document.getElementById("launch").addEventListener("click",s),c.addEventListener("change",d.updateBgColor(c.value)),l.addEventListener("change",function(){d.updateWidth(parseInt(this.value))}),h.addEventListener("change",function(){d.updateHeight(parseInt(this.value))}),a.addEventListener("change",function(){d.updateSpeedX(parseInt(this.value))}),u.addEventListener("change",function(){d.updateSpeedY(parseInt(this.value))}),c.addEventListener("change",function(){d.updateBgColor(this.value)})}();