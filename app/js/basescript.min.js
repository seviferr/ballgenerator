!function(){function t(t,e,i,s,h,a,u,c,g){this.id=t||"ball"+d.length,this.width=e||Math.round(100*Math.random()+10),this.height=i||this.width,this.bgcolor=s||"#"+Math.floor(16777215*Math.random()).toString(16),this.posX=h||20,this.posY=a||20,this.speedX=u||Math.round(10*Math.random()),this.speedY=c||Math.round(10*Math.random())-5,this.movement=g||n[Math.floor(Math.random()*n.length)],this.init=function(){var t=document.getElementById("ball-preview"),e=(document.forms.panel,document.createElement("div"));e.setAttribute("class","ball"),e.setAttribute("id",this.id),e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.backgroundColor=this.bgcolor,e.style.borderRadius="100%",e.style.left="50%",e.style.top="50%",e.style.marginTop="-"+this.height/2+"px",e.style.marginLeft="-"+this.width/2+"px",e.style.position="absolute",t.appendChild(e)},this.launch=function(){this.posX=0,this.posY=0,d.push(this)},this.move=function(){var t=document.getElementById(this.id).parentElement,e=t.offsetWidth,i=t.offsetHeight;switch(this.movement){case"dejavu":this.posX=(this.posX+this.speedX)%e,this.posY=(this.posY+this.speedY)%i;break;case"bounce":this.posX+=this.speedX,this.posY+=this.speedY,(this.posX+this.width>e||this.posX<0)&&(this.speedX*=-1),(this.posY+this.width>i||this.posY<0)&&(this.speedY*=-1);break;default:this.posX=(h+this.speedX)%e,this.posY=(a+this.speedY)%i}},this.updateId=function(t){this.id=t,console.log("newId : "+t)},this.updateWidth=function(t){this.width=t,document.getElementById(this.id).style.width=t,document.getElementById(this.id).style.marginLeft=t*-1/2,console.log(l),this.height=t,document.getElementById(this.id).style.height=t,document.getElementById(this.id).style.marginTop=t*-1/2,o()},this.updateHeight=function(t){this.height=t,document.getElementById(this.id).style.height=t*-1/2,document.getElementById(this.id).style.marginTop=-(t*-1)/2,console.log(t),this.width=t,document.getElementById(this.id).style.width=t,document.getElementById(this.id).style.marginLeft=t*-1/2,o()},this.updateSpeedX=function(t){this.speedX=t,console.log(t)},this.updateSpeedY=function(t){this.speedY=t,console.log(t)},this.updateBgColor=function(t){this.bgcolor=t,document.getElementById(this.id).style.backgroundColor=t,console.log("NewBgColor "+t)},this.updatePosX=function(t){this.posX=t,document.getElementById(this.id).style.left=t,console.log(t)},this.updatePosY=function(t){this.posY=t,document.getElementById(this.id).style.top=t,console.log(t)}}function e(){d.forEach(function(t,e){t.move(),document.getElementById(t.id).style.width=t.width,document.getElementById(t.id).style.height=t.height,document.getElementById(t.id).style.backgroundColor=t.bgcolor,document.getElementById(t.id).style.backgroundColor=t.bgcolor,document.getElementById(t.id).style.left=t.posX+"px",document.getElementById(t.id).style.top=t.posY+"px"})}function i(){void 0!==document.getElementById("test-ball")&&document.getElementById("test-ball").remove(),l=new t("test-ball"),l.init(),o()}function s(){var t=document.getElementById("pipe"),e=document.createElement("div");e.setAttribute("id","ball"+d.length),e.setAttribute("class","ball"),e.style.width=l.width,e.style.height=l.height,e.style.left=200,e.style.top=t.style.height-l.height/2,e.style.backgroundColor=l.bgcolor,e.style.borderRadius="100%",e.style.position="absolute",console.log(e.style.left),console.log(e.style.top),document.body.appendChild(e),l.updateId("ball"+d.length),l.updatePosX(200),l.updatePosY(window.innerHeight/2-l.height/2),d.push(l),console.log(d),i()}function o(){h.value=l.width,a.value=l.height,u.value=l.speedX,c.value=l.speedY,g.value=l.bgcolor}var n=(setInterval(e,20),["bounce","dejavu"]),d=[],l=new t("test-ball");l.init();var h=document.getElementById("ball-width"),a=document.getElementById("ball-height"),u=document.getElementById("ball-speedx"),c=document.getElementById("ball-speedy"),g=document.getElementById("ball-color");o(),document.getElementById("randomize").addEventListener("click",i),document.getElementById("launch").addEventListener("click",s),g.addEventListener("change",l.updateBgColor(g.value)),h.addEventListener("change",function(){l.updateWidth(parseInt(this.value))}),a.addEventListener("change",function(){l.updateHeight(parseInt(this.value))}),u.addEventListener("change",function(){l.updateSpeedX(this.value)}),c.addEventListener("change",function(){l.updateSpeedY(this.value)}),g.addEventListener("change",function(){l.updateBgColor(this.value)})}();